# 48장 모듈

## 48.1 모듈의 일반적 의미

모듈은 공개가 필요한 자산에 한정하여 명시적으로 선택적 공개가 가능하다. 이를 export라 한다.  
모듈 사용자는 모듈이 공개한 자산 중 일부 또는 전체를 선택해 자신의 스코프 내로 불러들여 재사용할 수 있다 이를 import라고 한다.

## 48.2 자바스크립트와 모듈

자바스크립트는 모듈이 성립하기 위해 필요한 파일 스코프와 import, export를 지원하지 않았다.  
클라이언트 사이드 자바스크립트는 script 태그를 사용하여 외부의 자바스크립트 파일을 로드할 수는 있찌만 파임람다 독립적인 파일 스코프를 갖지 않았다. 자바스크립트 파일을 여러개의 파일로 분리하여 script 태그로 로드해도 분리된 자바스크립트 파일들은 결국 하나의 자바스크립트 파일 내에 있는 것처럼 동작. 즉, 모든 자바스크립트 파일은 하나의 전역을 공유한다. 따라서 분리된 자바스크립트 파일의 전역변수가 중복되는 등의 문제가 발생할 수 있다. 이것으로는 모듈을 구현할 수 없다.
브라우저 환경에서 모듈을 사용하기 위해서는 CommonJS 또는 AMD를 구현한 모듈 로더 라이브러리를 사용해야함. 자바스크립트 런타임 환경인 Node.js는 모듈 시스템의 사실상 표준인 CommonJS를 채택했고 독자적인 진화를 거쳐, 현재는 COmmonsJS 사양과 100% 동일하지는 않지만 기본적으로 CommonJS 사양을 따르고 있다.

## 48.3 ES6 모듈(ESM)

script 태그에 `type="module"` 어트리뷰트를 추가하면 로드된 자바스크립트 파일은 모듈로서 동작. 일반적인 자바스크립트 파일이 아닌 ESM을 명확히 하기 위해 ESM의 파일 확장자는 mjs를 사용할 것을 권장

### .3.1 모듈 스코프

모듈 내에서 선언한 식별자는 모듈 외부에서 참조할 수 없다. 모듈 스코프가 다르기 때문

### .3.2 export 키워드

모듈은 독자적인 모듈 스코프를 갖느다. 따라서 모듈 내부에서 선언한 모든 식별자는 기본ㅂ적으로 해당 모듈 내부에서만 참조할 수 있다. 모듈 내부에서 선언한 식별자를 외부에 공개하여 다른 모듈들이 재사용할 수 있게 하려면 export 키워드를 사용.  
export 키워드는 선언문 앞에 사용.
export할 대상을 하나의 객체로 구서앟여 한번에 export할 수도 있음.

### .3.3 import 키워드

다른 모듈에서 공개한 식별자를 자신의 모듈 스코프 내부로 로드하려면 import 키워드를 사용. 다른 모듈이 export한 식별자 이름으로 import해야 하며 ESM의 경우 파일 확장자를 생략 가능.  
모듈이 export한 식별자 이름을 일일이 지정하지 않고 하나의 이름으로 한번에 import 할 수도 있다. 이 때 import되는 식별자는 as 뒤에 지정한 이름의 객체 프로퍼티로 할당된다.  
모듈이 export한 식별자 이름을 변경하여 import할 수도 있다.  
모듈에서 하나의 값만 export 한다면 `default` 키워드를 사용할 수 있다. default키워드를 사용하는 경우 기본적으로 이름 없이 하나의 값은 export할 수 있다.

- default 키워드를 사용시 var, let, const 키워드 사용 불가
- default 키워드와 함께 export한 모듈은 {} 없이 임의의 이름으로 import한다.

# 49장 Babel과 Webpack을 이용한 ES6+/ES.NEXT 개발 환경 구축

트랜스파일러인 Babel과 모듈번들러인 Webpack을 이용

## 49.1 Babel

최신 사양의 소스코드를 구형 브라우저에서도 동작하는 소스코드로 변환한다.

### .1.1 Babel 설치

npm을 사용하여 Babel 설치

### .1.2 Babel 프리셋 설치, babel.config.json 설정 파일 작성

@babel/preset-env를 설치해야 한다.

### .1.3 트랜스파일링

package.json 파일에 script를 추가하여 트랜스파일링 가능

    -w: 타깃 폴더에 있는 모든 자바스크립트 파일들의 변경을 감지하여 자동으로 트랜스파일 한다(--watch 옵션의 축약형)
    -d: 트랜스 파일링된 결과물이 저장될 폴더를 지정. 만약 지정된 폴더가 존재하지 않으면 자동 생성한다.(--out-dir 옵션의 축약형)

### .1.4 Babel 플러그인 설치

@bable/plugin-proposal-class-properties 설치

### .1.5 브라우저에서 모듈 로딩 테스트

## 49.2 Webpack

Webpack은 의존 관계에 있는 자바스크립트, css, 이미지 등의 리소스를 하나의 파일로 번들링하는 모듈 번들러다. Webpack을 사용해 의존 모듈이 하나의 파일로 번들링되므로 별도의 모듈 로더가 필요 없다. 그리고 여러개의 자바스크립트 파일을 하나로 번들링하므로 HTML 파일에서 script 태그로 여러개의 자바스크립트 파일을 로드해야하는 번거로움도 사라진다.

### .2.1 Webpack 설치

### .2.2 babel-loader 설치

### .2.3 webpack.config.js 설정 파일 작성

### .2.4 babel-polyfill 설치

## 요약

모듈 -
